# ※ 用户须知
- 请认真阅读所有注释内容，某些方法贯穿全文
- 项目CLI共有三个主命令，分别是 `task` `taskctl` `update`
- 命令中用 `<>` 括起来的部分表示需要用户自行输入相关内容
- 命令中 `<cmd>` 表示固定可选的子命令，分别表示对应功能的不同用法

> 由于项目运行在容器内，所以不能直接在宿主机执行相关命令

- 可通过如下两种方式实现：

    - 进入容器内执行命令

        ```bash
        docker exec -it jd bash
        ```

    - 在宿主机执行命令

        ```bash
        docker exec -it jd bash <cmd>
        ```

- 查看命令帮助
```bash
task
```
> 即时查看项目内大部分CLI命令的使用方法，已针对不同架构的设备做了特殊处理

***

ㅤ

## 普通执行
```bash
task <name/path/url> now
```
> 脚本运行的日志位于日志目录下的某个文件夹内，文件夹名为脚本名去后缀，日志名由日期组成\
> 扩展仓库脚本的日志文件夹会在原有名称前加上仓库名，并且中间用下划线分开

## 并发执行
```bash
task <name/path/url> conc
```
> 功能定义：为每个账号作为单独的进程在后台运行脚本，由于是后台运行故不在命令行输出进度直接记录到日志中

?> 并发执行非常消耗资源，不要盲目使用尤其是0点，否则资源占满导致终端连不上后只能强制关机重启

## 用法解读
### ❋ ㅤ命令含义 <!-- {docsify-ignore} -->

    <name>     脚本名，仅限 scripts 目录下的脚本，涵盖 "根目录" 以及 "utils" "backUp" 二个子目录

    <path>     脚本的相对路径或绝对路径，注意在定时配置清单中编写时需使用绝对路径

    <url>      位于远程仓库的脚本链接地址，支持链接自动纠正功能，执行后脚本默认保存在 scripts 目录

> __地址自动纠正__ 是什么功能？\
> 当拉取位于远程托管仓库的脚本时，无需刻意填写脚本的 raw 地址，可自动转换为原始文件链接以便于使用，此功能已应用到整个项目

### ❋ ㅤ注意事项 <!-- {docsify-ignore} -->

> 1.ㅤ执行以 `jd_` 或 `jx_` 为开头的脚本时该前缀内容可以省略，如遇同名则前者的优先级大于后者\
> 2.ㅤ执行本地脚本时脚本名的后缀格式（脚本类型）可以省略，当未指定后缀格式时将启用模糊查找\
> 3.ㅤ当未指定脚本类型但存在同名脚本时，执行优先级为 `JavaScript` > `Python` > `TypeScript` > `Shell`\
> 4.ㅤ目前共支持运行 `js` `py` `ts` `sh` 类型的脚本，TypeScript 和 Python 需要单独安装运行环境（默认已安装）

### ❋ ㅤ可选参数 <!-- {docsify-ignore} -->

!> 使用方法为追加在命令的末尾，请认真阅读各参数的用法

    --muteㅤ       （简写 -m）      作用为静默运行任务不推送任何通知消息

    --waitㅤ       （简写 -w）      作用为等待指定时间后再执行脚本，参数后面需跟时间值，具体值参照 sleep 命令的用法，支持毫秒、分钟、天

    --proxyㅤ      （简写 -p）      作用为启用下载代理，该代理固定为 Github Proxy，仅适用于执行位于远程仓库的脚本

    --rapidㅤ      （简写 -r）      作用为启用迅速模式，不组合互助码降低脚本执行前耗时

    --delayㅤ      （简写 -d）      作用为延迟执行脚本，随机倒数一定秒数后再执行脚本

    --cookieㅤ     （简写 -c）      作用为指定账号运行，参数后面需跟账号序号（在配置文件中的编号），如有多个需用 "," 隔开，支持账号区间，用 "-" 连接

    --backgroundㅤ （简写 -b）      作用为后台运行脚本，不在前台输出日志

***

## 终止执行
```bash
task <name/path> pkill
```
> 终止运行某个正在运行中的脚本，根据脚本名称搜索对应的进程并立即杀死，中间会有 `交互` 进行确认操作，当脚本报错死循环时可使用此功能

## 全部执行
```bash
source runall  或  . runall
```
> 通过 `交互` 选择运行模式执行指定范围的脚本，时间较长不要盲目使用

## 列出脚本
```bash
task list
```
> 查看本地有哪些可以运行的脚本

- 列出指定路径下的脚本（扩展用法）
```bash
task list <path>
```
